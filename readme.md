# Приложение для хранения документов

Проект использует Java 11, Spring Boot 2, БД H2,  REST API
Аутентификация: basic auth через БД
Весь REST API, кроме регистрации, доступен только после аутентификации

Запуск `./gradlew bootRun`
Включено управление H2 базой через localhost:8080/h2-console

`home.local.vtbtest.controller.FileController` отдельная часть вне задачи. 
Использован был совмесно с GUI для тестов загрузки и выгрузки файлов.

# Настройки

* Сервер запускается на localhost:8080

* Через `application.properties` выставлен максимальный размер загружаемых файлов `spring.servlet.multipart.max-file-size=100MB`
* В файле StorageProperties.java переменная location указывает путь на диске к хранилищу для крупных файлов
* Крупный файл или мелкий решает параметр из `StorageServiceImpl.java`  `MAX_FILE_SIZE`
всё что больше `MAX_FILE_SIZE` будет сохранено в `location`. Всё что меньше в БД.

* При старте приложения создаются сущности Документов, Клиентов, Файлов, Пользователей.
Настроить или поменять это можно в `VtbtestApplication.java`  раздел "Наполнение для БД"
* Приложение создаёт в базе пользователя `xan` пароль `pass` и он используется для авторизации в тестах.

* Тестовые запросы лежат `src/test/http/`
* в файле `document.http` один из запросов "Создание документа" - параметр где указан файл для загрузки.
Путь к файлу надо поправить на свой.
Если запрос не прошёл кидаем запрос на выборку всех сущностей (он первый в каждом из тестов).
Выбираем `id` и используем в тестовых запросах.